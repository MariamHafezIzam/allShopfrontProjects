<style>
  .loader {
    position: absolute;
    width: 100%;
    height: 100%;
    left: 0%;
    top: 0;
    background: #ffffff;
    z-index: 1;
    display: flex;
    text-align: center;
    align-content: center;
    transition: all 0.3s;
    display: block;
  }

  .loader .img {
    transition: all 0.3s;
    justify-content: center;
    justify-items: center;
    align-items: center;
  }
</style>
<div id="checkout-section" style="position: relative">
  <div class="load">
    <div
      style="
        justify-content: center;
        justify-items: center;
        align-items: center;
      "
    >
      <div class="loader">
        <p class="warning fs-lg-40 fs-20 fs text-danger font-weight-medium">
          من فضلك لا تغلق الصفحة حتي يتم حفظ الفاتورة
        </p>
        <img
          src="https://www.elshoroukshop.online/files/152938fd/logos/6645d3bce6c2f_blobid1715852217561.gif"
          alt=""
          title="600300 لوجو متحرك الشروق (2).gif"
          width="300"
          height="150"
        />
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="col-lg-1"></div>
      <div class="col-lg-10">
        <div class="text-center pt-18">
          {{# is_logged_in}} {{^ has_invoice}}
          <h2 class="font-weight-medium fs-18 mb-8 text-danger">
            خطأ: {{ errorMsg }}
          </h2>
          {{/ has_invoice}} {{# has_invoice}}
          <h1 class="fs-40 font-weight-extrabold text-dark mb-8">شراء</h1>
          {{/ has_invoice}} {{/ is_logged_in}} {{^ is_logged_in}}
          <h2 class="font-weight-medium fs-18 mb-8 text-dark">
            من فضلك
            <a
              href="/contents/login"
              class="btn btn-outline-primary fs-10 fs-lg-14 fs-sm-13 fs-xl-16 mr-2 mr-lg-0 p-1 px-sm-2 py-sm-1"
              >تسجيل الدخول</a
            >
            او
            <a
              href="/contents/register"
              class="btn btn-outline-primary fs-10 fs-lg-14 fs-sm-13 fs-xl-16 mr-2 mr-lg-0 p-1 px-sm-2 py-sm-1"
              >تسجيل حساب جديد</a
            >
          </h2>
          {{/ is_logged_in}}
        </div>
        <div class="row">
          <div class="col-lg-12" style="text-align: center">
            {{# is_logged_in}}{{# has_invoice}}
            <iframe
              onload=""
              id="payment_iframe"
              width="89%"
              height="500"
              src="{{ payment_link }}"
              frameborder="0"
            ></iframe>
            {{/ has_invoice}}{{/ is_logged_in}}
          </div>
        </div>
      </div>
      <div class="col-lg-1"></div>
    </div>
  </div>
</div>
<script type="text/javascript" language="javascript">
  // var iFrameSelector = $("#payment_iframe");
  // resizeIframe(iFrameSelector);
  // function resizeIframe(iframe) {
  //   iframe.height = iframe.contentWindow.document.body.scrollHeight + "px";
  // }

  $(document).ready(() => {
    let id = USER.client_id;
    $(".overlay").show();
    console.log(id);

    let checkData = setInterval(() => {
      console.log(document.querySelector("#payment_iframe"));
      document
        .querySelector("#payment_iframe")
        .contentDocument.querySelector("#InvoicePaymentFirstName").value = "-";
      document
        .querySelector("#payment_iframe")
        .contentDocument.querySelector("#InvoicePaymentLastName").value = "-";
      document
        .querySelector("#payment_iframe")
        .contentDocument.querySelector("#InvoicePaymentState").value = "-";
      document
        .querySelector("#payment_iframe")
        .contentDocument.querySelector("#InvoicePaymentState").value = "-";
      document
        .querySelector("#payment_iframe")
        .contentDocument.querySelector("#InvoicePaymentState").value = "-";
      document
        .querySelector("#payment_iframe")
        .contentDocument.querySelector("#InvoicePaymentState").value = "-";
      document
        .querySelector("#payment_iframe")
        .contentDocument.querySelector("#InvoicePaymentState").value = "-";
      document
        .querySelector("#payment_iframe")
        .contentDocument.querySelector("#InvoicePaymentState").value = "-";
      document
        .querySelector("#payment_iframe")
        .contentDocument.querySelector("#InvoicePaymentState").value = "-";
      document
        .querySelector("#payment_iframe")
        .contentDocument.querySelector(
          "div.wrap > div > div > div.col-flex-lg-8.pr-lg-0 > div:nth-child(1)"
        ).style.display = "none";
      $(".overlay").hide();
      $("#payment_iframe")
        .contents()
        .find(`#ClientAddPayment`)
        .trigger("submit");

      clearInterval(checkData);
    }, 1000);
    checkData();
    // setTimeout(() => {
    //   console.log(document.querySelector("#payment_iframe"));
    //   document
    //     .querySelector("#payment_iframe")
    //     .contentDocument.querySelector("#InvoicePaymentFirstName").value = "-";
    //   document
    //     .querySelector("#payment_iframe")
    //     .contentDocument.querySelector("#InvoicePaymentLastName").value = "-";
    //   document
    //     .querySelector("#payment_iframe")
    //     .contentDocument.querySelector("#InvoicePaymentState").value = "-";
    //   document
    //     .querySelector("#payment_iframe")
    //     .contentDocument.querySelector("#InvoicePaymentState").value = "-";
    //   document
    //     .querySelector("#payment_iframe")
    //     .contentDocument.querySelector("#InvoicePaymentState").value = "-";
    //   document
    //     .querySelector("#payment_iframe")
    //     .contentDocument.querySelector("#InvoicePaymentState").value = "-";
    //   document
    //     .querySelector("#payment_iframe")
    //     .contentDocument.querySelector("#InvoicePaymentState").value = "-";
    //   document
    //     .querySelector("#payment_iframe")
    //     .contentDocument.querySelector("#InvoicePaymentState").value = "-";
    //   document
    //     .querySelector("#payment_iframe")
    //     .contentDocument.querySelector("#InvoicePaymentState").value = "-";
    //   document
    //     .querySelector("#payment_iframe")
    //     .contentDocument.querySelector(
    //       "div.wrap > div > div > div.col-flex-lg-8.pr-lg-0 > div:nth-child(1)"
    //     ).style.display = "none";
    //   $(".overlay").hide();
    // }, 5000);

    // document.querySelector("#payment_iframe").contentDocument.querySelector("div.wrap > div > div > div.col-flex-lg-8.pr-lg-0 > div:nth-child(1)");
  });
  // });
</script>

<!-- 

  $(document).ready(function () {
    setTimeout(() => {
      let checkData = setInterval(() => {
      console.log(
        "mo2mn",
        $("#payment_iframe").contents().find(`#ClientAddPayment`)
      );
      $("#payment_iframe")
        .contents()
        .find(`#ClientAddPayment`)
        .trigger("submit");

      clearInterval(checkData);
    }, 1000);
    checkData();
    }, 500);
   

  });
</script> -->
